import { initializeApp as e } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js"; import { getAnalytics as t } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-analytics.js"; import { getDatabase as a, set as r, get as o, ref as s, child as n } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-database.js"; import "https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"; let firebaseConfig = { apiKey: "AIzaSyAatMT5UKjG4NDRbsVU41-g4a24Adnz804", authDomain: "connorbernarddev.firebaseapp.com", databaseURL: "https://connorbernarddev-default-rtdb.firebaseio.com", projectId: "connorbernarddev", storageBucket: "connorbernarddev.appspot.com", messagingSenderId: "838041937464", appId: "1:838041937464:web:3b4190404eac821ae0e8cd", measurementId: "G-X530E89GZZ" }, app = e(firebaseConfig), analytics = t(app), db = a(), contactForm = document.querySelector("#contactSection").querySelector("form"); contactForm.addEventListener("submit", e => { e.preventDefault(); let t = contactForm.querySelector("#formConclusion"), a = t.querySelector("[submissionMessageTemplate]").content.cloneNode(!0).children[0], o = contactForm.querySelector("textArea"), n = {}; contactForm.querySelectorAll("input").forEach(e => { n[e.name] = e.value }), n[o.name] = o.value, r(s(db, `contactForm/${contactForm.querySelector('input[name="firstName"]').value}${contactForm.querySelector('input[name="lastName"]').value}`), n).then(() => { let e = {}; e.from_name = `${n.firstName} ${n.lastName}`, e.from_phone_number = n.phone, e.message = n.message, e.reply_to = n.email, emailjs.send("service_lrh52a3", "template_f0xf5bf", e, "xT3P9zK8YmLIxvI3d").then(() => { }, e => { throw Error("Failed to send email - DB updated.") }), a.classList.add("successMessage"), a.querySelector("strong").textContent = "Success", a.querySelector("span").textContent = "Successfully sent your message!", t.appendChild(a) }).catch(e => { console.log(e), a.classList.add("errorMessage"), a.querySelector("strong").textContent = "Error", a.querySelector("span").textContent = "Unable to send message.", t.appendChild(a) }) }), contactForm.querySelectorAll(".notRequired").forEach(e => { e.addEventListener("change", t => { console.log(e), t.target.value ? e.querySelector("label").classList.add("hasInput") : e.querySelector("label").classList.remove("hasInput") }) });